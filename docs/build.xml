<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="docs">

    <!-- The autogenerated sdk paths file -->
    <property file="../local.properties"/>

    <!-- The developer-specific properties file, with paths -->
    <property file="docs.properties"/>


    <property name="doclava" value="./lib/doclava-1.0.6/doclava-1.0.6.jar"/>


    <!-- Builds pretty Doclava docs. NOTE: includes google analytics code in the template,
        so if we want to distribute the docs as a zip/jar, we should have a separate build
        process with a different template to avoid breaking our stats -->
    <target name="build">

        <delete dir="${buildDir}"/>
        <mkdir dir="${buildDir}"/>


        <copy todir="${buildDir}/template">
            <fileset dir="template"/>
        </copy>


        <replaceregexp file="${buildDir}/template/footer.cs"
                       match="\{airshipVersion\}"
                       replace="${airshipVersion}"/>

        <javadoc
            author="false"
            classpath="${sdk.dir}/platforms/android-20/android.jar"
            bootclasspath="${java.home}/lib/rt.jar"
            destdir="${buildDir}/output"
            docletpath="${doclava}"
            maxmemory="512M"
            nodeprecated="false"
            nodeprecatedlist="false"
            noindex="false"
            nonavbar="false"
            notree="false"
            packagenames="com.urbanairship.*"
            source="1.7">

            <fileset casesensitive="yes" dir="../UrbanAirship/src/main/java">
                <include name="**/*.java"/>
                <exclude name="**/com/android/**"/>
                <exclude name="**/com/urbanairship/analytics/PushArrivedEvent.java"/>
                <exclude name="**/com/urbanairship/analytics/PushPreferencesChangedEvent.java"/>
                <exclude name="**/com/urbanairship/util/**"/>
                <exclude name="**/com/urbanairship/http/**"/>
                <exclude name="**/com/urbanairship/RichPushTable.java"/>
                <exclude name="**/gen/**"/>
                <exclude name="**/build/**"/>
                <exclude name="**/test/**"/>
            </fileset>
            
            <doclet name="com.google.doclava.Doclava">
                <param name="-hdf"/>
                <param name="project.name"/>
                <param name="Urban Airship Android Library"/>
                <!--<param name="-since"/> <param name="doclava/previous.xml"/> <param name="v1" /> -->
                <param name="-apiversion" value="v2"/>
                <param name="-federate"/>
                <param name="Android"/>
                <param name="http://developer.android.com/reference"/>
                <param name="-federationxml"/>
                <param name="Android"/>
                <param name="${basedir}/lib/android-4.xml"/>
                <!--<param name="http://doclava.googlecode.com/svn/static/api/android-4.xml" />-->
                <param name="-templatedir"/>
                <param name="${buildDir}/template"/>
            </doclet>
        </javadoc>
    </target>
</project>
